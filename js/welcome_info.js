function WelcomeInfo(){let dist=getDistance(104.10194,30.65984,ipLoacation.result.location.lng,ipLoacation.result.location.lat),pos;""!=address.address_component.district?pos=address.address_component.district:""!=address.address_component.city?pos=address.address_component.city:""!=address.address_component.province&&(pos=address.address_component.province);let ip=ipLoacation.result.ip,weather=ipWeather.now.text,temp=ipWeather.now.temp,weather_greeting=getWeathergreeting(weather),temp_greeting;temp_greeting=temp<=10?`æ°”æ¸©åªæœ‰${temp}Â°Cï¼Œè®°å¾—æ·»è¡£ä¿æš–å“¦~`:temp>=30?`æ°”æ¸©é«˜è¾¾${temp}Â°Cï¼Œè®°å¾—å¤šè¡¥å……æ°´åˆ†ï¼Œå°½é‡å¾…åœ¨é˜´å‡‰å¤„~`:"";let time_greeting=getTimeChange();dist>5e3?dist_greeting=` è™½ç„¶æˆ‘ä»¬ç›¸éš”<span style="color:var(--theme-color)">${dist}</span>å…¬é‡Œï¼Œä½†æˆ‘ä»¬çš„å¿ƒå¯ä»¥è·¨è¶Šå±±æµ·ï¼Œå…±èµè¿™å®½å¹¿çš„ä¸–ç•Œã€‚`:dist>1e3&&dist<=5e3?dist_greeting=` æˆ‘ä»¬è¿œéš”<span style="color:var(--theme-color)">${dist}</span>å…¬é‡Œï¼Œå°±åƒæ˜Ÿæ˜Ÿä¸æ˜Ÿæ˜Ÿä¹‹é—´çš„è·ç¦»ï¼Œé¥è¿œå´äº’ç›¸ç…§è€€ã€‚`:dist>500&&dist<=1e3?dist_greeting=` æˆ‘ä»¬ä¹‹é—´çš„è·ç¦»æ˜¯<span style="color:var(--theme-color)">${dist}</span>å…¬é‡Œï¼Œå°±åƒä¸€æ®µç¾ä¸½çš„æ—…ç¨‹ï¼ŒæœŸå¾…æœ‰ä¸€å¤©ç›¸é‡ã€‚`:dist>100&&dist<=500?dist_greeting=` æˆ‘ä»¬åªæœ‰<span style="color:var(--theme-color)">${dist}</span>å…¬é‡Œçš„è·ç¦»ï¼Œå¥½åƒéš”ç€ä¸€åº§å°å±±ï¼ŒæœŸç›¼æœ‰æœä¸€æ—¥èƒ½ç›¸è§ã€‚`:dist<=100&&(dist_greeting=` æˆ‘ä»¬è¿‘åœ¨å’«å°ºï¼Œåªéš”äº†<span style="color:var(--theme-color)">${dist}</span>å…¬é‡Œï¼Œæ²¡å‡†å“ªå¤©å°±åœ¨<span style="color:var(--theme-color)">${pos} </span>å¶é‡äº†ã€‚`);let welcomeInfo=`<b><center>ğŸ‰ æ¬¢è¿ä¿¡æ¯ ğŸ‰</center>&emsp;&emsp;${time_greeting}ï¼Œç°åœ¨ <span style="color:var(--theme-color)">${pos}</span> çš„å¤©æ°”æ˜¯ <span style="color:var(--theme-color)">${weather}</span>ï¼Œæ°”æ¸© <span style="color:var(--theme-color)">${temp}Â°C</span>ï¼Œ${weather_greeting}${temp_greeting}<br>&emsp;&emsp;${dist_greeting}<center><span id="toggleIp" style="color:var(--theme-color);">ç‚¹å‡»æŸ¥çœ‹IP</span><br><span id="ipAddress" style="color:var(--theme-color); display: none;">${ip}</span></center></b>`;$(document).ready((function(){"/"===window.location.pathname&&(document.getElementById("welcome-info").innerHTML=welcomeInfo,document.getElementById("toggleIp").addEventListener("click",(function(){var ipElement=document.getElementById("ipAddress");ipElement.style.display="none"===ipElement.style.display?"inline":"none",this.textContent="none"===ipElement.style.display?"ç‚¹å‡»æŸ¥çœ‹IP":"ç‚¹å‡»éšè—IP"})))}))}function getDistance(e1,n1,e2,n2){const R=6371,rad=Math.PI/180,lat1=n1*rad,lat2=n2*rad,sinLat=Math.sin((n2-n1)*rad/2),sinLng=Math.sin((e2-e1)*rad/2),a=sinLat*sinLat+sinLng*sinLng*Math.cos(lat1)*Math.cos(lat2),c=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a));return Math.round(R*c)}function getTimeChange(){let date,hour=(new Date).getHours();return hour>=5&&hour<11?"<span style='color:var(--theme-color)'>ä¸Šåˆå¥½</span>":hour>=11&&hour<13?"<span style='color:var(--theme-color)'>ä¸­åˆå¥½</span>":hour>=13&&hour<18?"<span style='color:var(--theme-color)'>ä¸‹åˆå¥½</span>":hour>=18&&hour<24?"<span style='color:var(--theme-color)'>æ™šä¸Šå¥½</span>":"<span style='color:var(--theme-color)'>å¤œæ·±äº†ï¼Œæ—©ç‚¹ä¼‘æ¯ï¼Œå°‘ç†¬å¤œã€‚</span>"}function getWeathergreeting(weather){switch(weather){case"æ™´":greeting="å¤©ç©ºæ¸…æ™°ï¼Œé˜³å…‰å……è¶³ã€‚æ— è®ºæˆ‘ä»¬ç›¸éš”å¤šè¿œï¼Œéƒ½åœ¨åŒä¸€ç‰‡è“å¤©ä¸‹ã€‚";break;case"å¤šäº‘":greeting="äº‘æœµç‚¹ç¼€ç€å¤©ç©ºï¼Œä½†é˜³å…‰ä¾ç„¶ç¿çƒ‚ã€‚";break;case"é˜´":greeting="è™½ç„¶æ²¡æœ‰é˜³å…‰ï¼Œä½†æ„¿ä½ çš„å¿ƒæƒ…ä¾æ—§æ˜åªšã€‚";break;case"é˜µé›¨":greeting="åªæ˜¯ä¸€ä¼šå„¿ï¼Œå¾ˆå¿«é›¨äº‘å°±ä¼šé£˜èµ°å•¦ã€‚";break;case"å°é›¨":greeting="å°å°é›¨æ»´ï¼Œæ·‹æ¹¿äº†ä¹Ÿä¼šæ„Ÿå†’çš„ï¼Œè®°å¾—å¸¦ä¼å“¦ã€‚";break;case"é›·é˜µé›¨":greeting="é›·å£°ä¸­ä¹Ÿè—ç€è‡ªç„¶çš„åŠ›é‡ï¼Œå¸Œæœ›å®ƒä¸ä¼šæ‰“æ‰°åˆ°ä½ ã€‚";break;case"é›·é˜µé›¨å¹¶ä¼´æœ‰å†°é›¹":greeting="ä¼´éšç€é›·å£°å’Œå†°é›¹çš„æ˜¯å¤§è‡ªç„¶çš„å£®è§‚ï¼Œä½†ä¹Ÿè¯·æ³¨æ„å®‰å…¨ã€‚";break;case"é›¨å¤¹é›ª":greeting="é›¨å’Œé›ªçš„äº¤èï¼Œåƒæ˜¯å†¬æ—¥é‡Œçš„ä¸€ä¸ªå°å¥‡è¿¹ã€‚";break;case"ä¸­é›¨":greeting="é›¨åŠ¿é€‚ä¸­ï¼Œä½†ä¹Ÿåˆ«å¿˜äº†ä¿æŒå¹²ç‡¥ã€‚";break;case"å¤§é›¨":greeting="é›¨åŠ¿æœ‰ç‚¹å¤§ï¼Œå‡ºé—¨è®°å¾—å¸¦ä¼å‘ã€‚";break;case"æš´é›¨":greeting="é›¨åŠ¿å¾ˆå¤§ï¼Œè¯·å°½é‡å¾…åœ¨å®¤å†…ï¼Œä¿æŒæ¸©æš–å’Œå®‰å…¨ã€‚";break;case"å¤§æš´é›¨":greeting="é›¨åŠ¿éå¸¸å¤§ï¼Œä»Šå¤©å°±å‘†åœ¨å®¶é‡Œå§ã€‚";break;case"ç‰¹å¤§æš´é›¨":greeting="é¢å¯¹å¦‚æ­¤å¼ºé™é›¨ï¼Œè¯·åŠ¡å¿…ä¿æŒè­¦æƒ•ï¼Œæ³¨æ„å®‰å…¨ã€‚";break;case"é›¾":greeting="é›¾æ°”è’™è’™ï¼Œè§†çº¿ä¸æ¸…ã€‚å‡ºè¡Œè¯·å°å¿ƒã€‚";break;case"éœ¾":greeting="ç©ºæ°”è´¨é‡ä¸ä½³ï¼Œå°½é‡å‡å°‘æˆ·å¤–æ´»åŠ¨ã€‚";break;case"æ²™å°˜æš´":greeting="æ²™å°˜è‚†è™ï¼Œå¤–å‡ºè¯·æˆ´å¥½å£ç½©ä¿æŠ¤è‡ªå·±ã€‚";break;case"å¤§é£":greeting="é£åŠ›å¼ºåŠ²ï¼Œè¯·æ³¨æ„å®‰å…¨ï¼Œé¿å…æˆ·å¤–æ´»åŠ¨ã€‚";break;case"çƒ­":greeting="å¤©æ°”ç‚çƒ­ï¼Œè®°å¾—å¤šè¡¥å……æ°´åˆ†ï¼Œé˜²æ­¢ä¸­æš‘ã€‚";break;case"å¯’å†·":greeting="æ°”æ¸©ä½è¿·ï¼Œä¿æš–å¾ˆé‡è¦ï¼Œæ³¨æ„æ·»åŠ è¡£ç‰©ã€‚";break;default:greeting="æ— è®ºå¤©æ°”å¦‚ä½•ï¼Œéƒ½å¸Œæœ›ä½ æœ‰ä¸ªç¾å¥½çš„ä¸€å¤©ã€‚"}return greeting}$.ajax({type:"get",url:"https://apis.map.qq.com/ws/location/v1/ip",data:{key:"Z5QBZ-J4WCJ-2Q6FG-XQR25-IXXP7-VAFTJ",output:"jsonp"},dataType:"jsonp",success:function(res){res&&res.result&&res.result.location&&(ipLoacation=res,$.ajax({type:"get",url:"https://apis.map.qq.com/ws/geocoder/v1/?location=",data:{key:"Z5QBZ-J4WCJ-2Q6FG-XQR25-IXXP7-VAFTJ",location:`${ipLoacation.result.location.lat},${ipLoacation.result.location.lng}`,get_poi:1,output:"jsonp"},dataType:"jsonp",success:function(data){0===data.status?(address=data.result,$.ajax({type:"get",url:"https://devapi.qweather.com/v7/grid-weather/now",data:{key:"083ad2370e6c41e0b24fbf8dd4d455bb",location:res.result.location.lng+","+res.result.location.lat},success:function(res2){"200"===res2.code&&(ipWeather=res2,WelcomeInfo())},error:function(error){console.error("è·å–å¤©æ°”ä¿¡æ¯å¤±è´¥:",error)}})):console.error("è·å–åœ°å€ä¿¡æ¯å¤±è´¥:",data.message)},error:function(error){console.error("è¯·æ±‚å¤±è´¥:",error)}}))},error:function(error){console.error("è·å–ä½ç½®ä¿¡æ¯å¤±è´¥:",error)}}),document.addEventListener("pjax:complete",WelcomeInfo);